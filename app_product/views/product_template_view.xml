<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
 <!-- ''''''''''''''''''''''''''''''Prices/Costs of Product''''''''''''''''''''''''''''''''''''''''''' -->
 	 <record id="product_template_add_fields" model="ir.ui.view">
        <field name="name">product.template.add.fields</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_form_view"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='general_information']/group" position="after">
            <separator string="Calcul des Coûts/Prix:"/>
            <group>
            <group name="charges">
            <field name="prix_achat" widget='monetary'/>
            <field name="prix_transport" widget='monetary'/>
            <field name="cout_avs" widget='monetary'/>
            <field name="cout_ttm" widget='monetary'/>
            <label for="charge_fixe" string="Charge Fixe"/>
            <div>
            <field name="charge_fixe" string="Charge Fixe" class="oe_inline"/>%
            </div>
            <field name="provision_commission" widget='monetary'/>
            <field name="cout_revient" widget='monetary'/>
            </group>
            <group name="cout_calculer">
            <label for="marge_securite" string="Marge de securité"/>
            <div>
           <field name="marge_securite" class="oe_inline"/>%
           </div>
            <field name="prix_min_vente" widget='monetary'/>
            <field name="marge" widget='monetary'/>
            <field name="prix_vente_estime" widget='monetary'/>
            <field name="code_geo" />
            </group>
            </group>
            </xpath>
            </field>
         </record>
         
         <!-- ''''''''''''''''''''''''''''''Vente du jour''''''''''''''''''''''''''''''''''''''''''' -->
         <record model="ir.ui.view" id="product_template_form_view_sale_order_button2">
            <field name="name">product.template.sale.order.button2</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_only_form_view"/>
            <field name="groups_id" eval="[(4, ref('sales_team.group_sale_salesman'))]"/>
            <field name="arch" type="xml">
                <button name="toggle_active" position="after">
                    <button class="oe_stat_button" name="action_view_saless"
                        type="object" icon="fa-usd" groups="sales_team.group_sale_salesman">
                        Vente du jour
                    </button>
                </button>
               
            </field>
        </record>
        
        <!-- '''''''''''''''''''''''''''    Stock Virtuel       ''''''''''''''''''''''''''''' -->
        
        <record model="ir.ui.view" id="etat_stock_virtuel_un_jours_apres_commande_tree2">
			<field name="name">etat.stock.virtuel.un.jours.apres.commande.tree2</field>
			<field name="model">product.template</field>
			<field name="priority">20</field>
			<field name="arch" type="xml">
			
			<tree string="Stock Virtuel" decoration-bf="message_needaction==True">
			<field name="message_needaction" invisible="1"/>
		
			<field name="name"/>
			<field name="test_on_product_vertuel_jours_suivant2"/>	  
			<field name="total_commande_jour_suivant"/>	
			<field name="stock_virtuel_jour_suivant"/>
			<field name="test_on_product_ver"/>		  
					  </tree>	  
             	</field>
		 </record> 
		 
		 <record id="action_etat_stock_virtuel_un_jours_apres_commande_tree3" model="ir.actions.act_window">
            <field name="name">Stock Virtuel</field>
	       <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.template</field>
			<field name="domain">[("type", "!=", "consu"),("test_on_product_ver", "!=", 0)]</field>
            <field name="view_type">form</field>
			<field name="view_id" ref="etat_stock_virtuel_un_jours_apres_commande_tree2"/>
            <field name="view_mode">tree,form,graph,pivot</field>
			
        </record>
       
	   
	   <record id="action_etat_stock_virtuel_un_jours_apres_commande_treeqll3" model="ir.actions.act_window.view">
		 <field eval="3" name="sequence"/> 
		 <field name="view_mode">tree</field>
		 <field name="view_id" ref="etat_stock_virtuel_un_jours_apres_commande_tree2"/> 
		 <field name="act_window_id" ref="action_etat_stock_virtuel_un_jours_apres_commande_tree3"/> 
		 </record>

		<menuitem action="action_etat_stock_virtuel_un_jours_apres_commande_tree3"  id="sale.action_etat_stock_virtuel_un_jours_apres_commande_tree3" parent="sale.product_menu_catalog"/>
		
	<!-- '''''''''''''''''''''Customize the kanban view of the product''''''''''''''''''''''' -->
  
	   <record model="ir.ui.view" id="view_product_template_kanban_qtyvert_form">
        <field name="name">product.template.kanban.qtyvert.inherit</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_kanban_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='currency_id']" position="before">
                  <field name="uom_id"/>
                <field name="test_on_product_ver"/>
				<field name="type"/>
            </xpath>
            
            <xpath expr="//div[@class='oe_kanban_global_click']" position="replace">
                <div t-if="record.test_on_product_ver.value &gt; '0,00'" class="oe_kanban_global_click" style="background-color: #f55959">
                            <div class="o_kanban_image">
                                <img t-att-src="kanban_image('product.template', 'image_small', record.id.raw_value)"/>
                            </div>
                            <div class="oe_kanban_details">
                                <strong class="o_kanban_record_title">
                                    <field name="name"/>
                                    <small t-if="record.default_code.value">[<field name="default_code"/>]</small>
                                    
                                </strong>
                                <div>stock vertuel :  <field name="test_on_product_ver" />  <field name="uom_id"/></div>
                                 <div t-if="record.uom_id.value == 'kg'">stock vertuel :  <field name="test_on_product_ver_colis_for_kg" />  Colis</div>
                                <div t-if="record.product_variant_count.value &gt; 1" groups="product.group_product_variant">
                                    <strong>
                                        <t t-esc="record.product_variant_count.value"/> Variants
                                    </strong>
                                </div>
                                <div name="tags"/>
                                <ul>
								 <li t-if="record.type.raw_value == 'product'">En Stock: <field name="qty_available"/> <field name="uom_id"/></li>
                                 
                                    <li>Price: <field name="lst_price" widget="monetary" options="{'currency_field': 'currency_id', 'field_digits': True}"/></li>
                                </ul>
                                <div name="tags"/>
                            </div>
                        </div>
                        <div t-if="record.test_on_product_ver.value == '0,00'" class="oe_kanban_global_click" style="background-color: #5df55d">
                            <div class="o_kanban_image">
                                <img t-att-src="kanban_image('product.template', 'image_small', record.id.raw_value)"/>
                            </div>
                            <div class="oe_kanban_details">
                                <strong class="o_kanban_record_title">
                                    <field name="name"/>
                                    <small t-if="record.default_code.value">[<field name="default_code"/>]</small>
                                    
                                </strong>
                                <div>stock vertuel :  <field name="test_on_product_ver" />  <field name="uom_id"/></div>
                                 <div t-if="record.uom_id.value == 'kg'">stock vertuel :  <field name="test_on_product_ver_colis_for_kg" />  Colis</div>
                                <div t-if="record.product_variant_count.value &gt; 1" groups="product.group_product_variant">
                                    <strong>
                                        <t t-esc="record.product_variant_count.value"/> Variants
                                    </strong>
                                </div>
                                <div name="tags"/>
					
                                <ul>
								  <li t-if="record.type.raw_value == 'product'">En Stock: <field name="qty_available"/> <field name="uom_id"/></li>
                                    <li>Price: <field name="lst_price" widget="monetary" options="{'currency_field': 'currency_id', 'field_digits': True}"/></li>
                                </ul>
                                <div name="tags"/>
                            </div>
                        </div>
						<div t-if="record.test_on_product_ver.value &lt; '0,00'" class="oe_kanban_global_click" style="background-color: #f4f559">
                            <div class="o_kanban_image">
                                <img t-att-src="kanban_image('product.template', 'image_small', record.id.raw_value)"/>
                            </div>
                            <div class="oe_kanban_details">
                                <strong class="o_kanban_record_title">
                                    <field name="name"/>
                                    <small t-if="record.default_code.value">[<field name="default_code"/>]</small>
                                    
                                </strong>
                                <div>stock vertuel :  <field name="test_on_product_ver" />  <field name="uom_id"/></div>
                                 <div t-if="record.uom_id.value == 'kg'">stock vertuel :  <field name="test_on_product_ver_colis_for_kg" />  Colis</div>
                                <div t-if="record.product_variant_count.value &gt; 1" groups="product.group_product_variant">
                                    <strong>
                                        <t t-esc="record.product_variant_count.value"/> Variants
                                    </strong>
                                </div>
                                <div name="tags"/>
					
                                <ul>
								  <li t-if="record.type.raw_value == 'product'">En Stock: <field name="qty_available"/> <field name="uom_id"/></li>
                                    <li>Price: <field name="lst_price" widget="monetary" options="{'currency_field': 'currency_id', 'field_digits': True}"/></li>
                                </ul>
                                <div name="tags"/>
                            </div>
                        </div>
            </xpath>
        </field>
    </record>	
       </data>
</odoo>